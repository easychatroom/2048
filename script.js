const _0x425db8=_0x2299;(function(_0x259f73,_0x1aaa38){const _0x39690f=_0x2299,_0x23655d=_0x259f73();while(!![]){try{const _0x30008e=parseInt(_0x39690f(0xcc))/0x1+-parseInt(_0x39690f(0xf8))/0x2*(-parseInt(_0x39690f(0x111))/0x3)+-parseInt(_0x39690f(0xd0))/0x4+parseInt(_0x39690f(0x114))/0x5+-parseInt(_0x39690f(0xea))/0x6*(-parseInt(_0x39690f(0x116))/0x7)+parseInt(_0x39690f(0xd2))/0x8*(-parseInt(_0x39690f(0x104))/0x9)+parseInt(_0x39690f(0xde))/0xa*(-parseInt(_0x39690f(0xc5))/0xb);if(_0x30008e===_0x1aaa38)break;else _0x23655d['push'](_0x23655d['shift']());}catch(_0x58fb30){_0x23655d['push'](_0x23655d['shift']());}}}(_0x8a01,0x73878));const boardSize=0x4;let board=[],selectedTile={'row':null,'col':null};function createBoard(){const _0x375f3e=_0x2299,_0xd1c127={'MXGse':_0x375f3e(0x103),'nPbKK':_0x375f3e(0xdf),'Ellgl':'click','ZPRya':function(_0x3c52b3){return _0x3c52b3();}},_0x260b92=document['querySelector'](_0xd1c127[_0x375f3e(0xd9)]);_0x260b92['innerHTML']='';for(let _0xeee473=0x0;_0xeee473<boardSize;_0xeee473++){board[_0xeee473]=[];for(let _0x3e07d2=0x0;_0x3e07d2<boardSize;_0x3e07d2++){board[_0xeee473][_0x3e07d2]=0x0;const _0x47858e=document['createElement'](_0x375f3e(0xce));_0x47858e[_0x375f3e(0xf9)][_0x375f3e(0x10d)](_0xd1c127[_0x375f3e(0xf7)]),_0x47858e['dataset'][_0x375f3e(0xf4)]=_0xeee473,_0x47858e[_0x375f3e(0x11c)][_0x375f3e(0x10b)]=_0x3e07d2,_0x47858e[_0x375f3e(0xfa)](_0xd1c127['Ellgl'],()=>selectTile(_0xeee473,_0x3e07d2)),_0x260b92['appendChild'](_0x47858e);}}_0xd1c127[_0x375f3e(0x118)](spawnTile),_0xd1c127['ZPRya'](spawnTile),_0xd1c127['ZPRya'](renderBoard),_0xd1c127[_0x375f3e(0x118)](updateMaxTile);}function renderBoard(){const _0x24e1d7=_0x2299,_0x5c0dc6={'eQWod':function(_0x1530eb,_0x521bf7){return _0x1530eb<_0x521bf7;},'EJNyI':function(_0x56dc2a,_0x4be4b4){return _0x56dc2a<_0x4be4b4;},'gqBPw':function(_0x3fb667,_0x32f1e0){return _0x3fb667===_0x32f1e0;},'XBuTC':'selected'};for(let _0x43c6d7=0x0;_0x5c0dc6[_0x24e1d7(0x119)](_0x43c6d7,boardSize);_0x43c6d7++){for(let _0x227f4f=0x0;_0x5c0dc6[_0x24e1d7(0xd5)](_0x227f4f,boardSize);_0x227f4f++){const _0x146ecf=document[_0x24e1d7(0x117)](_0x24e1d7(0xc3)+_0x43c6d7+_0x24e1d7(0x109)+_0x227f4f+'\x22]'),_0x2010d1=board[_0x43c6d7][_0x227f4f];_0x146ecf[_0x24e1d7(0x101)]=_0x2010d1===0x0?'':_0x2010d1,_0x146ecf[_0x24e1d7(0x11c)][_0x24e1d7(0xd4)]=_0x2010d1,_0x5c0dc6[_0x24e1d7(0xe8)](selectedTile['row'],_0x43c6d7)&&selectedTile[_0x24e1d7(0x10b)]===_0x227f4f?_0x146ecf[_0x24e1d7(0xf9)][_0x24e1d7(0x10d)](_0x24e1d7(0xd7)):_0x146ecf[_0x24e1d7(0xf9)][_0x24e1d7(0xff)](_0x5c0dc6[_0x24e1d7(0xdb)]);}}}function spawnTile(){const _0x54caac=_0x2299,_0x2d3fe5={'cIQcV':function(_0x5e44a2,_0x2f5eba){return _0x5e44a2<_0x2f5eba;},'bwQQr':function(_0x4b2f25,_0x2180eb){return _0x4b2f25===_0x2180eb;},'XDgWs':function(_0x6b0a06,_0x116b67){return _0x6b0a06*_0x116b67;}},_0x179837=[];for(let _0x4be687=0x0;_0x2d3fe5[_0x54caac(0x107)](_0x4be687,boardSize);_0x4be687++){for(let _0x56b3a1=0x0;_0x56b3a1<boardSize;_0x56b3a1++){_0x2d3fe5['bwQQr'](board[_0x4be687][_0x56b3a1],0x0)&&_0x179837[_0x54caac(0xfe)]({'row':_0x4be687,'col':_0x56b3a1});}}if(_0x179837[_0x54caac(0x112)]>0x0){const _0x1b6e86=_0x179837[Math['floor'](_0x2d3fe5[_0x54caac(0xdc)](Math[_0x54caac(0xd6)](),_0x179837[_0x54caac(0x112)]))];board[_0x1b6e86['row']][_0x1b6e86[_0x54caac(0x10b)]]=_0x2d3fe5['cIQcV'](Math[_0x54caac(0xd6)](),0.9)?0x2:0x4;}}function selectTile(_0x20f1fb,_0x249367){const _0x410e86=_0x2299,_0xe83b30={'rGgcf':function(_0x3c368e){return _0x3c368e();}};selectedTile={'row':_0x20f1fb,'col':_0x249367},_0xe83b30[_0x410e86(0xc0)](renderBoard),_0xe83b30['rGgcf'](updateMaxTile);}function handleKeyPress(_0x368e71){const _0x319052=_0x2299,_0x12a490={'lCpQp':function(_0x59eff8,_0x39aedd){return _0x59eff8===_0x39aedd;},'OgNcf':function(_0xefc8d6,_0x1c7263){return _0xefc8d6>_0x1c7263;},'zTyTY':_0x319052(0xf3),'esMtO':function(_0x1106a2,_0x3f09ed){return _0x1106a2<_0x3f09ed;},'wAmeU':function(_0x536f74,_0x4e612d){return _0x536f74-_0x4e612d;},'AnnCV':_0x319052(0x11d),'QdEBM':function(_0x2821e8,_0x40ca3f){return _0x2821e8>_0x40ca3f;},'LtxDj':'ArrowRight','QdLgy':function(_0xb8dbb1,_0x851296){return _0xb8dbb1-_0x851296;},'ZnKFG':_0x319052(0xfd),'KOVZc':function(_0x116f6a){return _0x116f6a();},'YUeMF':function(_0x14e5b3,_0x18accb,_0x45835e,_0x3014b6,_0x12f425){return _0x14e5b3(_0x18accb,_0x45835e,_0x3014b6,_0x12f425);}};if(_0x12a490[_0x319052(0xbf)](selectedTile[_0x319052(0xf4)],null)||selectedTile[_0x319052(0x10b)]===null)return;const {row:_0x36aadb,col:_0x620e03}=selectedTile;let _0x3f5f20=_0x36aadb,_0x51d897=_0x620e03;switch(_0x368e71[_0x319052(0xc1)]){case _0x319052(0xcb):if(_0x12a490[_0x319052(0xc4)](_0x36aadb,0x0))_0x3f5f20--;break;case _0x12a490[_0x319052(0x11e)]:if(_0x12a490[_0x319052(0xbc)](_0x36aadb,_0x12a490[_0x319052(0x10e)](boardSize,0x1)))_0x3f5f20++;break;case _0x12a490[_0x319052(0xef)]:if(_0x12a490[_0x319052(0x102)](_0x620e03,0x0))_0x51d897--;break;case _0x12a490[_0x319052(0xe0)]:if(_0x620e03<_0x12a490[_0x319052(0x115)](boardSize,0x1))_0x51d897++;break;default:return;}if(_0x3f5f20!==_0x36aadb||_0x51d897!==_0x620e03){const _0x99c7b9=_0x12a490[_0x319052(0xc2)]['split']('|');let _0x54df2c=0x0;while(!![]){switch(_0x99c7b9[_0x54df2c++]){case'0':_0x12a490[_0x319052(0x106)](updateMaxTile);continue;case'1':_0x12a490['KOVZc'](spawnTile);continue;case'2':_0x12a490['YUeMF'](moveTile,_0x36aadb,_0x620e03,_0x3f5f20,_0x51d897);continue;case'3':_0x12a490[_0x319052(0x106)](renderBoard);continue;case'4':selectedTile={'row':_0x3f5f20,'col':_0x51d897};continue;}break;}}}function moveTile(_0x572c7e,_0x43832a,_0x438987,_0x165350){if(board[_0x438987][_0x165350]===0x0)board[_0x438987][_0x165350]=board[_0x572c7e][_0x43832a],board[_0x572c7e][_0x43832a]=0x0;else board[_0x438987][_0x165350]===board[_0x572c7e][_0x43832a]&&(board[_0x438987][_0x165350]*=0x2,board[_0x572c7e][_0x43832a]=0x0);}document['querySelector'](_0x425db8(0xf6))['addEventListener'](_0x425db8(0xe7),()=>{const _0x4d97a3=_0x425db8,_0x74a616={'zgylo':function(_0x8322ab){return _0x8322ab();}};selectedTile={'row':null,'col':null},_0x74a616[_0x4d97a3(0xf5)](createBoard);}),document[_0x425db8(0xfa)](_0x425db8(0x10c),handleKeyPress);let currentUser=null,maxTileValue=0x0;((async()=>{const _0x3c8564=_0x425db8,_0x1c7192={'AwuEk':_0x3c8564(0xc8),'ciHXV':_0x3c8564(0x108),'cTJQS':function(_0x2cb05f){return _0x2cb05f();},'foXUF':function(_0x3d7aa4){return _0x3d7aa4();}};currentUser=await _0x1c7192[_0x3c8564(0xe3)](authenticateFromURL);if(!currentUser)return;_0x1c7192[_0x3c8564(0xda)](listenToLeaderboard),_0x1c7192[_0x3c8564(0xda)](createBoard),window[_0x3c8564(0xfa)](_0x3c8564(0xc7),()=>{const _0x3f821f=_0x3c8564;sessionStorage['removeItem'](_0x1c7192['AwuEk']),sessionStorage['removeItem'](_0x1c7192[_0x3f821f(0xfb)]);});})());function _0x8a01(){const _0x2b09e7=['LtxDj','all','flat','cTJQS','XHktU','forEach','join','click','gqBPw','avatarBase64','6ngJzzt','max','innerHTML','auth/','2048Scores','AnnCV','maxTile','leaderboardEntries','aAFFz','ArrowDown','row','zgylo','.restart-btn','nPbKK','252698qoqaGz','classList','addEventListener','ciHXV','kQEqi','2|4|1|3|0','push','remove','slice','textContent','QdEBM','.game-board','709785psTAxC','</span>','KOVZc','cIQcV','2048_avatar','\x22][data-col=\x22','</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','col','keydown','add','wAmeU','XKsCf','/avatarBase64','15PVYmnX','length','get','4103130wAjCxT','QdLgy','2891672FxJeQU','querySelector','ZPRya','eQWod','2048Scores/','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','dataset','ArrowLeft','zTyTY','esMtO','iXKiE','val','lCpQp','rGgcf','key','ZnKFG','.tile[data-row=\x22','OgNcf','1949497hGVxNR','now','beforeunload','2048_user','replace','username','ArrowUp','530193wlkfXC','DTKxj','div','getElementById','519232bEkwXd','ref','56yLFgiG','<span\x20style=\x22margin-right:8px;\x22>','value','EJNyI','random','selected','wKwbl','MXGse','foXUF','XBuTC','XDgWs','</span>\x20-\x20<b>','70ptmKCl','tile'];_0x8a01=function(){return _0x2b09e7;};return _0x8a01();}function getMaxTile(_0xfd3d05){const _0x31d24c=_0x425db8;return Math[_0x31d24c(0xeb)](..._0xfd3d05[_0x31d24c(0xe2)]());}function updateMaxTile(){const _0x5ed9cd=_0x425db8,_0x2f0bbf={'kQEqi':function(_0x577d31,_0x15b39b){return _0x577d31(_0x15b39b);},'iXKiE':function(_0x501f19,_0x301577){return _0x501f19>_0x301577;},'aAFFz':function(_0x26bae9,_0x54536e){return _0x26bae9(_0x54536e);}},_0x21c38c=_0x2f0bbf[_0x5ed9cd(0xfc)](getMaxTile,board);_0x2f0bbf[_0x5ed9cd(0xbd)](_0x21c38c,maxTileValue)&&(maxTileValue=_0x21c38c,_0x2f0bbf[_0x5ed9cd(0xf2)](saveTileToFirebase,_0x21c38c));}function saveTileToFirebase(_0x56eaed){const _0x503525=_0x425db8,_0x128fe4={'wKwbl':function(_0x49cdeb,_0x12161c){return _0x49cdeb(_0x12161c);}},_0x5cb2d7=_0x128fe4[_0x503525(0xd8)](sanitizeUsername,currentUser['username']),_0xd92622=db['ref'](_0x503525(0x11a)+_0x5cb2d7);_0xd92622[_0x503525(0x113)]()['then'](_0x4ddf26=>{const _0x2f6e48=_0x503525,_0x30b389=_0x4ddf26[_0x2f6e48(0xbe)]();(!_0x30b389||_0x56eaed>(_0x30b389[_0x2f6e48(0xf0)]||0x0))&&_0xd92622['set']({'username':currentUser[_0x2f6e48(0xca)],'avatarBase64':currentUser[_0x2f6e48(0xe9)]||'','maxTile':_0x56eaed,'timestamp':Date[_0x2f6e48(0xc6)]()});});}function _0x2299(_0x56fe6a,_0x191897){const _0x8a01eb=_0x8a01();return _0x2299=function(_0x2299b0,_0x4b8aa1){_0x2299b0=_0x2299b0-0xbc;let _0x4f0a3b=_0x8a01eb[_0x2299b0];return _0x4f0a3b;},_0x2299(_0x56fe6a,_0x191897);}function sanitizeUsername(_0x389936){const _0x239db2=_0x425db8;return _0x389936[_0x239db2(0xc9)](/[.#$\[\]]/g,'_');}function listenToLeaderboard(){const _0x44a6ef=_0x425db8,_0xca1c34={'DTKxj':function(_0x2e0078,_0x331ebb){return _0x2e0078===_0x331ebb;},'XKsCf':function(_0x2eec17,_0x3a5830){return _0x2eec17===_0x3a5830;},'XaeQU':function(_0x57b3a5,_0x2e3739){return _0x57b3a5+_0x2e3739;},'TYnsP':_0x44a6ef(0xf1),'XHktU':_0x44a6ef(0xd4)},_0x517599=document[_0x44a6ef(0xcf)](_0xca1c34['TYnsP']);db[_0x44a6ef(0xd1)](_0x44a6ef(0xee))['on'](_0xca1c34[_0x44a6ef(0xe4)],async _0x4280b7=>{const _0x2bb2c3=_0x44a6ef,_0x1ec398=[],_0x5bb572=[];_0x4280b7[_0x2bb2c3(0xe5)](_0x53a68b=>{const _0x359c4d=_0x2bb2c3,_0x4df839=_0x53a68b[_0x359c4d(0xbe)]();_0x4df839&&_0x4df839['maxTile']&&_0x4df839[_0x359c4d(0xca)]&&(_0x1ec398['push'](_0x4df839),_0x5bb572[_0x359c4d(0xfe)](db[_0x359c4d(0xd1)](_0x359c4d(0xed)+sanitizeUsername(_0x4df839[_0x359c4d(0xca)])+_0x359c4d(0x110))[_0x359c4d(0x113)]()));});const _0x40862e=await Promise[_0x2bb2c3(0xe1)](_0x5bb572);_0x1ec398[_0x2bb2c3(0xe5)]((_0x448a89,_0x134741)=>{const _0x286e56=_0x2bb2c3;_0x448a89['avatarBase64']=_0x40862e[_0x134741][_0x286e56(0xbe)]()||'';}),_0x1ec398['sort']((_0x24285e,_0x17525f)=>_0x17525f['maxTile']-_0x24285e['maxTile']);const _0x371f7d=_0x1ec398[_0x2bb2c3(0x100)](0x0,0x32);_0x517599[_0x2bb2c3(0xec)]=_0x371f7d['map']((_0x33f55a,_0x3dd0e0)=>{const _0x2af334=_0x2bb2c3;let _0x436ca8='';if(_0xca1c34[_0x2af334(0xcd)](_0x3dd0e0,0x0))_0x436ca8='🥇';else{if(_0xca1c34[_0x2af334(0x10f)](_0x3dd0e0,0x1))_0x436ca8='🥈';else{if(_0xca1c34[_0x2af334(0x10f)](_0x3dd0e0,0x2))_0x436ca8='🥉';}}const _0x1ea59c=_0x2af334(0xd3)+_0xca1c34['XaeQU'](_0x3dd0e0,0x1)+'\x20'+_0x436ca8+_0x2af334(0x105);return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22leaderboard-entry\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1ea59c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22data:image/png;base64,'+_0x33f55a[_0x2af334(0xe9)]+_0x2af334(0x11b)+_0x33f55a[_0x2af334(0xca)]+_0x2af334(0xdd)+_0x33f55a[_0x2af334(0xf0)]+_0x2af334(0x10a);})[_0x2bb2c3(0xe6)]('');});}