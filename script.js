const _0x3ca272=_0x3faa;function _0x5a08(){const _0x2c7330=['vuJMm','limitToLast','.game-board','wCaeY','remove','139551vFjpVm','uRNmX','dataset','replace','random','now','maxTile','PzteR','ArrowRight','9037650RnEtYg','</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','createElement','dRCAH','2048_user','then','max','key','CaaMw','BxMwY','set','col','wPriH','keydown','.restart-btn','RBFZd','username','textContent','appendChild','val','get','sort','2048_avatar','addEventListener','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22data:image/png;base64,','VhUkM','ArrowUp','</span>','ArrowDown','</span>\x20\x20-\x20\x20<b>','8AlIDFp','map','8704017hUHctB','10CnqDQV','div','LLyKg','classList','zAkfB','add','value','1829156iRClKt','lUXgy','selected','mvSxV','querySelector','WrwKs','EVXPF','getElementById','floor','54ElZkdC','leaderboardEntries','4433443GRYTlI','CbAEE','AsTAE','vMMly','removeItem','szLSj','flat','row','click','length','LwiMn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22leaderboard-entry\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','orUgF','.tile[data-row=\x22','YoTdi','avatarBase64','5946222SxFCSo','983267FHZfcq','eLVdS','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','split','DFyZn','RQEuo','thXDm','sSaPC','<span\x20style=\x22margin-right:8px;\x22>(','ref','OAgHs'];_0x5a08=function(){return _0x2c7330;};return _0x5a08();}(function(_0xb27ad9,_0x673d2){const _0x5dab6f=_0x3faa,_0x53332b=_0xb27ad9();while(!![]){try{const _0x550572=parseInt(_0x5dab6f(0xa5))/0x1+parseInt(_0x5dab6f(0xf0))/0x2*(-parseInt(_0x5dab6f(0xb5))/0x3)+parseInt(_0x5dab6f(0xe7))/0x4+-parseInt(_0x5dab6f(0xbe))/0x5+parseInt(_0x5dab6f(0xa4))/0x6+-parseInt(_0x5dab6f(0xf2))/0x7*(-parseInt(_0x5dab6f(0xdd))/0x8)+parseInt(_0x5dab6f(0xdf))/0x9*(parseInt(_0x5dab6f(0xe0))/0xa);if(_0x550572===_0x673d2)break;else _0x53332b['push'](_0x53332b['shift']());}catch(_0x5b04e6){_0x53332b['push'](_0x53332b['shift']());}}}(_0x5a08,0xec776));const boardSize=0x4;let board=[],selectedTile={'row':null,'col':null};function _0x3faa(_0x10adb5,_0x510bd5){const _0x5a0876=_0x5a08();return _0x3faa=function(_0x3faa37,_0x39975b){_0x3faa37=_0x3faa37-0x96;let _0x463633=_0x5a0876[_0x3faa37];return _0x463633;},_0x3faa(_0x10adb5,_0x510bd5);}function createBoard(){const _0x4aec9a=_0x3faa,_0x29c5f5={'RBFZd':_0x4aec9a(0xb2),'EVXPF':function(_0x28ab8d,_0x467b2e){return _0x28ab8d<_0x467b2e;},'RQEuo':_0x4aec9a(0xe1),'LLyKg':'tile','AsTAE':function(_0x46cb48){return _0x46cb48();},'thXDm':function(_0x598c25){return _0x598c25();}},_0x2b30d6=document['querySelector'](_0x29c5f5[_0x4aec9a(0xcd)]);_0x2b30d6['innerHTML']='';for(let _0x5aa1f0=0x0;_0x5aa1f0<boardSize;_0x5aa1f0++){board[_0x5aa1f0]=[];for(let _0x4deb90=0x0;_0x29c5f5[_0x4aec9a(0xed)](_0x4deb90,boardSize);_0x4deb90++){board[_0x5aa1f0][_0x4deb90]=0x0;const _0x5c5d41=document[_0x4aec9a(0xc0)](_0x29c5f5[_0x4aec9a(0xaa)]);_0x5c5d41[_0x4aec9a(0xe3)][_0x4aec9a(0xe5)](_0x29c5f5[_0x4aec9a(0xe2)]),_0x5c5d41[_0x4aec9a(0xb7)]['row']=_0x5aa1f0,_0x5c5d41[_0x4aec9a(0xb7)][_0x4aec9a(0xc9)]=_0x4deb90,_0x5c5d41[_0x4aec9a(0xd5)](_0x4aec9a(0x9c),()=>selectTile(_0x5aa1f0,_0x4deb90)),_0x2b30d6[_0x4aec9a(0xd0)](_0x5c5d41);}}_0x29c5f5[_0x4aec9a(0x96)](spawnTile),_0x29c5f5[_0x4aec9a(0xab)](spawnTile),renderBoard(),_0x29c5f5['AsTAE'](updateMaxTile);}function renderBoard(){const _0x258ef6=_0x3faa,_0x48f70={'DFyZn':function(_0x30db73,_0x2c15c8){return _0x30db73===_0x2c15c8;},'YoTdi':function(_0x3047eb,_0x2ed300){return _0x3047eb===_0x2ed300;},'CaaMw':_0x258ef6(0xe9)};for(let _0x3dc44f=0x0;_0x3dc44f<boardSize;_0x3dc44f++){for(let _0x842743=0x0;_0x842743<boardSize;_0x842743++){const _0x5eb633=document[_0x258ef6(0xeb)](_0x258ef6(0xa1)+_0x3dc44f+'\x22][data-col=\x22'+_0x842743+'\x22]'),_0x4fa14f=board[_0x3dc44f][_0x842743];_0x5eb633[_0x258ef6(0xcf)]=_0x48f70['DFyZn'](_0x4fa14f,0x0)?'':_0x4fa14f,_0x5eb633[_0x258ef6(0xb7)][_0x258ef6(0xe6)]=_0x4fa14f,_0x48f70[_0x258ef6(0xa2)](selectedTile['row'],_0x3dc44f)&&_0x48f70[_0x258ef6(0xa9)](selectedTile['col'],_0x842743)?_0x5eb633['classList'][_0x258ef6(0xe5)](_0x258ef6(0xe9)):_0x5eb633[_0x258ef6(0xe3)][_0x258ef6(0xb4)](_0x48f70[_0x258ef6(0xc6)]);}}}function spawnTile(){const _0x88d529=_0x3faa,_0x1cf29b={'eqaKm':function(_0x3aa0b8,_0x1501b7){return _0x3aa0b8<_0x1501b7;},'sSaPC':function(_0x4f2c27,_0x4a8754){return _0x4f2c27<_0x4a8754;},'BxMwY':function(_0x41a94c,_0x10ae3d){return _0x41a94c===_0x10ae3d;},'QPlUy':function(_0x413235,_0x155fba){return _0x413235*_0x155fba;},'wCaeY':function(_0x2adb8d,_0x41d556){return _0x2adb8d<_0x41d556;}},_0x263e1d=[];for(let _0x236568=0x0;_0x1cf29b['eqaKm'](_0x236568,boardSize);_0x236568++){for(let _0x35a44f=0x0;_0x1cf29b[_0x88d529(0xac)](_0x35a44f,boardSize);_0x35a44f++){_0x1cf29b[_0x88d529(0xc7)](board[_0x236568][_0x35a44f],0x0)&&_0x263e1d['push']({'row':_0x236568,'col':_0x35a44f});}}if(_0x263e1d[_0x88d529(0x9d)]>0x0){const _0x1f7453=_0x263e1d[Math[_0x88d529(0xef)](_0x1cf29b['QPlUy'](Math[_0x88d529(0xb9)](),_0x263e1d['length']))];board[_0x1f7453['row']][_0x1f7453[_0x88d529(0xc9)]]=_0x1cf29b[_0x88d529(0xb3)](Math['random'](),0.9)?0x2:0x4;}}function selectTile(_0x108fd6,_0x2aecc9){const _0x415e92=_0x3faa,_0x1bb758={'dRCAH':function(_0x102c44){return _0x102c44();},'uRNmX':function(_0x13da53){return _0x13da53();}};selectedTile={'row':_0x108fd6,'col':_0x2aecc9},_0x1bb758[_0x415e92(0xc1)](renderBoard),_0x1bb758[_0x415e92(0xb6)](updateMaxTile);}function handleKeyPress(_0x30c391){const _0x55f983=_0x3faa,_0x404738={'CNDuY':function(_0x256c50,_0x4aacbd){return _0x256c50===_0x4aacbd;},'ZgQOi':function(_0x4d619c,_0x573ff6){return _0x4d619c>_0x573ff6;},'lOpMJ':_0x55f983(0xdb),'TecxU':function(_0x1de898,_0x14c069){return _0x1de898<_0x14c069;},'wPriH':function(_0x3e5b33,_0xe150f5){return _0x3e5b33-_0xe150f5;},'cHdbt':'ArrowLeft','szLSj':_0x55f983(0xbd),'iiVSf':function(_0x5e251d,_0x3eefca){return _0x5e251d<_0x3eefca;},'zAkfB':function(_0x6ddb7d,_0x52304d){return _0x6ddb7d!==_0x52304d;},'Rpsqw':'3|0|4|2|1','kMDUi':function(_0x47468b){return _0x47468b();},'PzteR':function(_0x4c2d11,_0x1fb789,_0x4a5384,_0x9244e,_0xf390df){return _0x4c2d11(_0x1fb789,_0x4a5384,_0x9244e,_0xf390df);},'mOmnw':function(_0x24f7e7){return _0x24f7e7();}};if(selectedTile[_0x55f983(0x9b)]===null||_0x404738['CNDuY'](selectedTile[_0x55f983(0xc9)],null))return;const {row:_0x348bb3,col:_0x3e3e32}=selectedTile;let _0x35231f=_0x348bb3,_0x46819e=_0x3e3e32;switch(_0x30c391[_0x55f983(0xc5)]){case _0x55f983(0xd9):if(_0x404738['ZgQOi'](_0x348bb3,0x0))_0x35231f--;break;case _0x404738['lOpMJ']:if(_0x404738['TecxU'](_0x348bb3,_0x404738['wPriH'](boardSize,0x1)))_0x35231f++;break;case _0x404738['cHdbt']:if(_0x3e3e32>0x0)_0x46819e--;break;case _0x404738[_0x55f983(0x99)]:if(_0x404738['iiVSf'](_0x3e3e32,_0x404738[_0x55f983(0xca)](boardSize,0x1)))_0x46819e++;break;default:return;}if(_0x404738[_0x55f983(0xe4)](_0x35231f,_0x348bb3)||_0x404738[_0x55f983(0xe4)](_0x46819e,_0x3e3e32)){const _0x4033d4=_0x404738['Rpsqw'][_0x55f983(0xa8)]('|');let _0x14a6b3=0x0;while(!![]){switch(_0x4033d4[_0x14a6b3++]){case'0':selectedTile={'row':_0x35231f,'col':_0x46819e};continue;case'1':_0x404738['kMDUi'](updateMaxTile);continue;case'2':_0x404738['kMDUi'](renderBoard);continue;case'3':_0x404738[_0x55f983(0xbc)](moveTile,_0x348bb3,_0x3e3e32,_0x35231f,_0x46819e);continue;case'4':_0x404738['mOmnw'](spawnTile);continue;}break;}}}function moveTile(_0x523e10,_0x3afae9,_0x8eb6ba,_0x1be062){const _0x410f20={'aQxvF':function(_0xf75f4c,_0x5db076){return _0xf75f4c===_0x5db076;}};if(_0x410f20['aQxvF'](board[_0x8eb6ba][_0x1be062],0x0))board[_0x8eb6ba][_0x1be062]=board[_0x523e10][_0x3afae9],board[_0x523e10][_0x3afae9]=0x0;else board[_0x8eb6ba][_0x1be062]===board[_0x523e10][_0x3afae9]&&(board[_0x8eb6ba][_0x1be062]*=0x2,board[_0x523e10][_0x3afae9]=0x0);}document['querySelector'](_0x3ca272(0xcc))['addEventListener']('click',()=>{const _0x2b3cfe=_0x3ca272,_0x47adeb={'vMMly':function(_0x6890af){return _0x6890af();}};selectedTile={'row':null,'col':null},_0x47adeb[_0x2b3cfe(0x97)](createBoard);}),document[_0x3ca272(0xd5)](_0x3ca272(0xcb),handleKeyPress);let currentUser=null,maxTileValue=0x0;((async()=>{const _0x438c4e=_0x3ca272,_0x1ee9f1={'UIkQC':_0x438c4e(0xc2),'Dqqgp':_0x438c4e(0xd4),'WrwKs':function(_0x48bbce){return _0x48bbce();},'mvSxV':function(_0x812d8e){return _0x812d8e();},'elVZy':function(_0x2455b1){return _0x2455b1();},'CbAEE':'beforeunload'};currentUser=await _0x1ee9f1[_0x438c4e(0xec)](authenticateFromURL);if(!currentUser)return;_0x1ee9f1[_0x438c4e(0xea)](listenToLeaderboard),_0x1ee9f1['elVZy'](createBoard),window['addEventListener'](_0x1ee9f1[_0x438c4e(0xf3)],()=>{const _0x100f79=_0x438c4e;sessionStorage[_0x100f79(0x98)](_0x1ee9f1['UIkQC']),sessionStorage[_0x100f79(0x98)](_0x1ee9f1['Dqqgp']);});})());function getMaxTile(_0x109cf6){const _0x3dfeac=_0x3ca272;return Math[_0x3dfeac(0xc4)](..._0x109cf6[_0x3dfeac(0x9a)]());}function updateMaxTile(){const _0x5b6ee0=_0x3ca272,_0x156dec={'vuJMm':function(_0x25c3f6,_0x4981b8){return _0x25c3f6(_0x4981b8);}},_0x1283dc=getMaxTile(board);_0x1283dc>maxTileValue&&(maxTileValue=_0x1283dc,_0x156dec[_0x5b6ee0(0xb0)](saveTileToFirebase,_0x1283dc));}function saveTileToFirebase(_0x53b9cf){const _0x40a4bd=_0x3ca272,_0x3d97dc={'LwiMn':function(_0x3c64e0,_0x59cabd){return _0x3c64e0>_0x59cabd;},'OAgHs':function(_0x38b543,_0x1f92b9){return _0x38b543(_0x1f92b9);}},_0x47df3f=_0x3d97dc[_0x40a4bd(0xaf)](sanitizeUsername,currentUser[_0x40a4bd(0xce)]),_0x2ef2b5=db['ref']('2048Scores/'+_0x47df3f);_0x2ef2b5[_0x40a4bd(0xd2)]()[_0x40a4bd(0xc3)](_0x4967d0=>{const _0x2167f8=_0x40a4bd,_0x349d47=_0x4967d0[_0x2167f8(0xd1)]();(!_0x349d47||_0x3d97dc[_0x2167f8(0x9e)](_0x53b9cf,_0x349d47[_0x2167f8(0xbb)]||0x0))&&_0x2ef2b5[_0x2167f8(0xc8)]({'username':currentUser['username'],'avatarBase64':currentUser[_0x2167f8(0xa3)]||'','maxTile':_0x53b9cf,'timestamp':Date[_0x2167f8(0xba)]()});});}function sanitizeUsername(_0x58ca93){const _0x1962df=_0x3ca272;return _0x58ca93[_0x1962df(0xb8)](/[.#$\[\]]/g,'_');}function listenToLeaderboard(){const _0x304523=_0x3ca272,_0x3cb50c={'orUgF':_0x304523(0xf1),'lUXgy':'2048Scores'},_0x51401d=document[_0x304523(0xee)](_0x3cb50c[_0x304523(0xa0)]);db[_0x304523(0xae)](_0x3cb50c[_0x304523(0xe8)])['orderByChild'](_0x304523(0xbb))[_0x304523(0xb1)](0x14)['on']('value',_0x3d3a92=>{const _0x15330=_0x304523,_0x2b95e5={'VhUkM':function(_0x579c93,_0x3e37e5){return _0x579c93===_0x3e37e5;},'eLVdS':function(_0x268ca4,_0x190b77){return _0x268ca4+_0x190b77;}},_0x395644=[];_0x3d3a92['forEach'](_0x1b452a=>_0x395644[_0x15330(0xd6)](_0x1b452a['val']())),_0x395644[_0x15330(0xd3)]((_0x3b53af,_0x20462e)=>_0x20462e['maxTile']-_0x3b53af['maxTile']),_0x51401d['innerHTML']=_0x395644[_0x15330(0xde)]((_0x2342b8,_0x5d4240)=>{const _0x241945=_0x15330;let _0x3b8add='';if(_0x5d4240===0x0)_0x3b8add='🥇';else{if(_0x2b95e5['VhUkM'](_0x5d4240,0x1))_0x3b8add='🥈';else{if(_0x2b95e5[_0x241945(0xd8)](_0x5d4240,0x2))_0x3b8add='🥉';}}const _0x5ad6f6=_0x241945(0xad)+_0x2b95e5[_0x241945(0xa6)](_0x5d4240,0x1)+')\x20'+_0x3b8add+_0x241945(0xda);return _0x241945(0x9f)+_0x5ad6f6+_0x241945(0xd7)+_0x2342b8[_0x241945(0xa3)]+_0x241945(0xa7)+_0x2342b8['username']+_0x241945(0xdc)+_0x2342b8['maxTile']+_0x241945(0xbf);})['join']('');});}