const _0x21a21d=_0x5e45;(function(_0x5d541d,_0x5285af){const _0x2aba5b=_0x5e45,_0x47407b=_0x5d541d();while(!![]){try{const _0x5c6036=-parseInt(_0x2aba5b(0xd9))/0x1+-parseInt(_0x2aba5b(0xaa))/0x2*(parseInt(_0x2aba5b(0x9d))/0x3)+-parseInt(_0x2aba5b(0xa8))/0x4+-parseInt(_0x2aba5b(0xbe))/0x5+-parseInt(_0x2aba5b(0xad))/0x6*(parseInt(_0x2aba5b(0x9c))/0x7)+parseInt(_0x2aba5b(0xb9))/0x8+parseInt(_0x2aba5b(0xa2))/0x9;if(_0x5c6036===_0x5285af)break;else _0x47407b['push'](_0x47407b['shift']());}catch(_0x3db413){_0x47407b['push'](_0x47407b['shift']());}}}(_0x2c73,0x74cbf));const boardSize=0x4;let board=[],selectedTile={'row':null,'col':null};function _0x5e45(_0x53d48f,_0x5a79e1){const _0x2c736e=_0x2c73();return _0x5e45=function(_0x5e45d3,_0x2a153d){_0x5e45d3=_0x5e45d3-0x8b;let _0x5a7a81=_0x2c736e[_0x5e45d3];return _0x5a7a81;},_0x5e45(_0x53d48f,_0x5a79e1);}function createBoard(){const _0x22be4b=_0x5e45,_0xda7f13={'mqBGX':_0x22be4b(0xd4),'DSVRU':function(_0x5a7cbe){return _0x5a7cbe();},'FYooj':function(_0x10ee00){return _0x10ee00();}},_0x311317=document[_0x22be4b(0xb1)](_0x22be4b(0xac));_0x311317['innerHTML']='';for(let _0x3af52c=0x0;_0x3af52c<boardSize;_0x3af52c++){board[_0x3af52c]=[];for(let _0x11df5a=0x0;_0x11df5a<boardSize;_0x11df5a++){board[_0x3af52c][_0x11df5a]=0x0;const _0x1150b2=document[_0x22be4b(0x96)](_0x22be4b(0xe3));_0x1150b2[_0x22be4b(0xb5)][_0x22be4b(0xb2)](_0x22be4b(0xd0)),_0x1150b2['dataset']['row']=_0x3af52c,_0x1150b2['dataset'][_0x22be4b(0xa0)]=_0x11df5a,_0x1150b2[_0x22be4b(0xcb)](_0xda7f13[_0x22be4b(0xbd)],()=>selectTile(_0x3af52c,_0x11df5a)),_0x311317['appendChild'](_0x1150b2);}}_0xda7f13[_0x22be4b(0xa4)](spawnTile),spawnTile(),_0xda7f13[_0x22be4b(0xb6)](renderBoard),updateMaxTile();}function renderBoard(){const _0x355a33=_0x5e45,_0x3d6434={'JToIm':function(_0x20e148,_0x4a5412){return _0x20e148<_0x4a5412;},'yCwQd':function(_0x178338,_0x3f0058){return _0x178338<_0x3f0058;},'BErzf':function(_0x35f67a,_0x4a9b49){return _0x35f67a===_0x4a9b49;},'Ajupj':_0x355a33(0xb8)};for(let _0x1fafb2=0x0;_0x3d6434[_0x355a33(0xc9)](_0x1fafb2,boardSize);_0x1fafb2++){for(let _0x7b720a=0x0;_0x3d6434['yCwQd'](_0x7b720a,boardSize);_0x7b720a++){const _0x2855da=document[_0x355a33(0xb1)](_0x355a33(0x90)+_0x1fafb2+_0x355a33(0xe1)+_0x7b720a+'\x22]'),_0x1dd800=board[_0x1fafb2][_0x7b720a];_0x2855da[_0x355a33(0x95)]=_0x1dd800===0x0?'':_0x1dd800,_0x2855da[_0x355a33(0xbc)][_0x355a33(0xd3)]=_0x1dd800,_0x3d6434[_0x355a33(0xc7)](selectedTile['row'],_0x1fafb2)&&selectedTile[_0x355a33(0xa0)]===_0x7b720a?_0x2855da[_0x355a33(0xb5)][_0x355a33(0xb2)](_0x3d6434['Ajupj']):_0x2855da[_0x355a33(0xb5)][_0x355a33(0xce)](_0x355a33(0xb8));}}}function spawnTile(){const _0x35ab86=_0x5e45,_0x362ff4={'cvOMg':function(_0x58da48,_0x20a100){return _0x58da48<_0x20a100;},'ZuylI':function(_0x1d29c5,_0x5d6404){return _0x1d29c5===_0x5d6404;},'NhEqj':function(_0x4bdcf8,_0x5ccf27){return _0x4bdcf8>_0x5ccf27;},'DjTBW':function(_0x59f67b,_0x44b2ec){return _0x59f67b*_0x44b2ec;}},_0x5a85fb=[];for(let _0x189824=0x0;_0x362ff4[_0x35ab86(0xc0)](_0x189824,boardSize);_0x189824++){for(let _0x9f322f=0x0;_0x362ff4[_0x35ab86(0xc0)](_0x9f322f,boardSize);_0x9f322f++){_0x362ff4[_0x35ab86(0xd7)](board[_0x189824][_0x9f322f],0x0)&&_0x5a85fb['push']({'row':_0x189824,'col':_0x9f322f});}}if(_0x362ff4[_0x35ab86(0xae)](_0x5a85fb[_0x35ab86(0xc5)],0x0)){const _0x146137=_0x5a85fb[Math['floor'](_0x362ff4[_0x35ab86(0xa7)](Math['random'](),_0x5a85fb[_0x35ab86(0xc5)]))];board[_0x146137[_0x35ab86(0x8f)]][_0x146137[_0x35ab86(0xa0)]]=Math[_0x35ab86(0x9a)]()<0.9?0x2:0x4;}}function selectTile(_0x50f980,_0xba591){const _0x52ae36=_0x5e45,_0x4628b5={'HPZgm':function(_0x264821){return _0x264821();}};selectedTile={'row':_0x50f980,'col':_0xba591},_0x4628b5[_0x52ae36(0x9f)](renderBoard),_0x4628b5['HPZgm'](updateMaxTile);}function handleKeyPress(_0x553288){const _0xb5a4e1=_0x5e45,_0x3d5e62={'REJRO':function(_0x1218bc,_0x22aa63){return _0x1218bc===_0x22aa63;},'LdZIX':_0xb5a4e1(0xc8),'sZrAD':function(_0x12a19b,_0x470363){return _0x12a19b>_0x470363;},'rNOjM':_0xb5a4e1(0xa3),'vGXNx':function(_0x5bf77e,_0x1d9ace){return _0x5bf77e<_0x1d9ace;},'MBOnB':function(_0x1dd93e,_0x5772fc){return _0x1dd93e-_0x5772fc;},'ecCeh':function(_0x22fdc7,_0xb08e79){return _0x22fdc7>_0xb08e79;},'xkaWO':_0xb5a4e1(0xc4),'aLzMU':function(_0x4987df,_0x484824){return _0x4987df-_0x484824;},'FoyiP':function(_0x104f31,_0x4a5a29){return _0x104f31!==_0x4a5a29;},'DAnQz':function(_0x3536a5){return _0x3536a5();},'tuYfu':function(_0x407314){return _0x407314();},'FoQbA':function(_0xeab598){return _0xeab598();}};if(_0x3d5e62[_0xb5a4e1(0xaf)](selectedTile[_0xb5a4e1(0x8f)],null)||selectedTile['col']===null)return;const {row:_0x38e68f,col:_0x2d71dc}=selectedTile;let _0x24e6de=_0x38e68f,_0x1c976d=_0x2d71dc;switch(_0x553288[_0xb5a4e1(0xd5)]){case _0x3d5e62['LdZIX']:if(_0x3d5e62['sZrAD'](_0x38e68f,0x0))_0x24e6de--;break;case _0x3d5e62[_0xb5a4e1(0xa6)]:if(_0x3d5e62['vGXNx'](_0x38e68f,_0x3d5e62[_0xb5a4e1(0xdc)](boardSize,0x1)))_0x24e6de++;break;case'ArrowLeft':if(_0x3d5e62[_0xb5a4e1(0xcf)](_0x2d71dc,0x0))_0x1c976d--;break;case _0x3d5e62[_0xb5a4e1(0xd8)]:if(_0x3d5e62[_0xb5a4e1(0x98)](_0x2d71dc,_0x3d5e62['aLzMU'](boardSize,0x1)))_0x1c976d++;break;default:return;}(_0x3d5e62[_0xb5a4e1(0xcd)](_0x24e6de,_0x38e68f)||_0x3d5e62[_0xb5a4e1(0xcd)](_0x1c976d,_0x2d71dc))&&(moveTile(_0x38e68f,_0x2d71dc,_0x24e6de,_0x1c976d),selectedTile={'row':_0x24e6de,'col':_0x1c976d},_0x3d5e62[_0xb5a4e1(0x9e)](spawnTile),_0x3d5e62[_0xb5a4e1(0x92)](renderBoard),_0x3d5e62[_0xb5a4e1(0xd2)](updateMaxTile));}function moveTile(_0x387513,_0x429125,_0x548df3,_0x45d2ee){const _0x22046b=_0x5e45,_0x3d79d8={'uMboc':function(_0x1e09f8,_0x560b5a){return _0x1e09f8===_0x560b5a;}};if(_0x3d79d8[_0x22046b(0xab)](board[_0x548df3][_0x45d2ee],0x0))board[_0x548df3][_0x45d2ee]=board[_0x387513][_0x429125],board[_0x387513][_0x429125]=0x0;else _0x3d79d8['uMboc'](board[_0x548df3][_0x45d2ee],board[_0x387513][_0x429125])&&(board[_0x548df3][_0x45d2ee]*=0x2,board[_0x387513][_0x429125]=0x0);}document[_0x21a21d(0xb1)](_0x21a21d(0x8e))['addEventListener'](_0x21a21d(0xd4),()=>{const _0xb91869={'vOYaI':function(_0xdf33f){return _0xdf33f();}};selectedTile={'row':null,'col':null},_0xb91869['vOYaI'](createBoard);}),document[_0x21a21d(0xcb)](_0x21a21d(0xb7),handleKeyPress);let currentUser=null,maxTileValue=0x0;((async()=>{const _0x5abbe4=_0x21a21d,_0x4f9aee={'EFcUZ':_0x5abbe4(0x94),'iimAU':_0x5abbe4(0xb0)};currentUser=await authenticateFromURL();if(!currentUser)return;listenToLeaderboard(),createBoard(),window[_0x5abbe4(0xcb)](_0x4f9aee[_0x5abbe4(0xc3)],()=>{const _0x2c8c14=_0x5abbe4;sessionStorage[_0x2c8c14(0xc2)]('2048_user'),sessionStorage[_0x2c8c14(0xc2)](_0x4f9aee[_0x2c8c14(0x8c)]);});})());function getMaxTile(_0x1be560){const _0x134927=_0x21a21d;return Math[_0x134927(0xa5)](..._0x1be560['flat']());}function updateMaxTile(){const _0x5f01c7=_0x21a21d,_0x419dd1={'BFBwh':function(_0x4a7856,_0x28ce74){return _0x4a7856(_0x28ce74);}},_0xec87aa=getMaxTile(board);_0xec87aa>maxTileValue&&(maxTileValue=_0xec87aa,_0x419dd1[_0x5f01c7(0xbf)](saveTileToFirebase,_0xec87aa));}function saveTileToFirebase(_0x3c22a4){const _0x56346d=_0x21a21d,_0x46a067={'znbtN':function(_0x5da6f5,_0x1a0d38){return _0x5da6f5>_0x1a0d38;},'mXdJz':function(_0x1cb8c4,_0xfd5003){return _0x1cb8c4(_0xfd5003);}},_0x185cac=_0x46a067['mXdJz'](sanitizeUsername,currentUser[_0x56346d(0xd6)]),_0x3f9a21=db[_0x56346d(0xbb)](_0x56346d(0xd1)+_0x185cac);_0x3f9a21[_0x56346d(0xdf)]()[_0x56346d(0xde)](_0x3f65ce=>{const _0x31ba8b=_0x56346d,_0x2aa7a7=_0x3f65ce[_0x31ba8b(0x93)]();(!_0x2aa7a7||_0x46a067[_0x31ba8b(0xc1)](_0x3c22a4,_0x2aa7a7[_0x31ba8b(0xa1)]||0x0))&&_0x3f9a21['set']({'username':currentUser['username'],'avatarBase64':currentUser['avatarBase64']||'','maxTile':_0x3c22a4,'timestamp':Date[_0x31ba8b(0x91)]()});});}function sanitizeUsername(_0x238ed7){const _0x95b6a=_0x21a21d;return _0x238ed7[_0x95b6a(0xcc)](/[.#$\[\]]/g,'_');}function listenToLeaderboard(){const _0x47e259=_0x21a21d,_0x5a729c={'BVNQz':function(_0x3c391d,_0x558b7c){return _0x3c391d===_0x558b7c;},'cUimX':_0x47e259(0x8d),'pvSpm':_0x47e259(0xca),'eeViD':_0x47e259(0xd3)},_0x7c92b3=document['getElementById'](_0x5a729c[_0x47e259(0xb3)]);db['ref'](_0x5a729c[_0x47e259(0x9b)])['on'](_0x5a729c[_0x47e259(0xa9)],_0xad04a1=>{const _0x3e50d6=_0x47e259,_0x393400={'LoulA':function(_0x5cb96e,_0xc37e2){const _0x3af86a=_0x5e45;return _0x5a729c[_0x3af86a(0xe2)](_0x5cb96e,_0xc37e2);},'edhdQ':function(_0x1edd5d,_0x24b73b){const _0x7a6a92=_0x5e45;return _0x5a729c[_0x7a6a92(0xe2)](_0x1edd5d,_0x24b73b);}},_0xaa4593=[];_0xad04a1[_0x3e50d6(0x97)](_0x5335dc=>{const _0x48552a=_0x3e50d6,_0xba2367=_0x5335dc[_0x48552a(0x93)]();_0xba2367&&_0xba2367[_0x48552a(0xa1)]&&_0xba2367[_0x48552a(0xd6)]&&_0xaa4593['push'](_0xba2367);}),_0xaa4593[_0x3e50d6(0xba)]((_0x7c9c0b,_0x42fc56)=>_0x42fc56[_0x3e50d6(0xa1)]-_0x7c9c0b[_0x3e50d6(0xa1)]);const _0x197203=_0xaa4593[_0x3e50d6(0xda)](0x0,0x32);_0x7c92b3[_0x3e50d6(0xc6)]=_0x197203[_0x3e50d6(0xb4)]((_0x22dec9,_0x2fd9ab)=>{const _0x7ff28a=_0x3e50d6;let _0x519f38='';if(_0x393400['LoulA'](_0x2fd9ab,0x0))_0x519f38='ðŸ¥‡';else{if(_0x393400['LoulA'](_0x2fd9ab,0x1))_0x519f38='ðŸ¥ˆ';else{if(_0x393400['edhdQ'](_0x2fd9ab,0x2))_0x519f38='ðŸ¥‰';}}const _0x5f38fe=_0x7ff28a(0x99)+(_0x2fd9ab+0x1)+'\x20'+_0x519f38+_0x7ff28a(0xe0);return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22leaderboard-entry\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5f38fe+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22data:image/png;base64,'+(_0x22dec9['avatarBase64']||'')+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x22dec9[_0x7ff28a(0xd6)]+_0x7ff28a(0xdb)+_0x22dec9[_0x7ff28a(0xa1)]+_0x7ff28a(0x8b);})[_0x3e50d6(0xdd)]('');});}function _0x2c73(){const _0x46a929=['selected','4406392BFvMeB','sort','ref','dataset','mqBGX','2315315ZOroIR','BFBwh','cvOMg','znbtN','removeItem','iimAU','ArrowRight','length','innerHTML','BErzf','ArrowUp','JToIm','2048Scores','addEventListener','replace','FoyiP','remove','ecCeh','tile','2048Scores/','FoQbA','value','click','key','username','ZuylI','xkaWO','592320gdhLKx','slice','</span>\x20-\x20<b>','MBOnB','join','then','get','</span>','\x22][data-col=\x22','BVNQz','div','</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','EFcUZ','leaderboardEntries','.restart-btn','row','.tile[data-row=\x22','now','tuYfu','val','2048_avatar','textContent','createElement','forEach','vGXNx','<span\x20style=\x22margin-right:8px;\x22>','random','pvSpm','153713XZWwct','49815kxeNow','DAnQz','HPZgm','col','maxTile','18899127MnDcgV','ArrowDown','DSVRU','max','rNOjM','DjTBW','386260uAvwTI','eeViD','70ILjtNs','uMboc','.game-board','120Lxdszx','NhEqj','REJRO','beforeunload','querySelector','add','cUimX','map','classList','FYooj','keydown'];_0x2c73=function(){return _0x46a929;};return _0x2c73();}