const _0x525f63=_0x5d97;(function(_0x5e15fd,_0x372cb6){const _0x9d9697=_0x5d97,_0x1d5a5e=_0x5e15fd();while(!![]){try{const _0x5ab996=parseInt(_0x9d9697(0xe2))/0x1+-parseInt(_0x9d9697(0xe3))/0x2+-parseInt(_0x9d9697(0xb6))/0x3*(-parseInt(_0x9d9697(0xc6))/0x4)+-parseInt(_0x9d9697(0xc3))/0x5+-parseInt(_0x9d9697(0xa2))/0x6+parseInt(_0x9d9697(0xba))/0x7+parseInt(_0x9d9697(0xd9))/0x8;if(_0x5ab996===_0x372cb6)break;else _0x1d5a5e['push'](_0x1d5a5e['shift']());}catch(_0x1562ee){_0x1d5a5e['push'](_0x1d5a5e['shift']());}}}(_0x415b,0xf1c34));const boardSize=0x4;let board=[],selectedTile={'row':null,'col':null};function _0x5d97(_0x3f4b9c,_0x35b56f){const _0x415b35=_0x415b();return _0x5d97=function(_0x5d97dd,_0x589a52){_0x5d97dd=_0x5d97dd-0x96;let _0x67c8c=_0x415b35[_0x5d97dd];return _0x67c8c;},_0x5d97(_0x3f4b9c,_0x35b56f);}function createBoard(){const _0x48263f=_0x5d97,_0x32bb6c={'WrPaM':_0x48263f(0xe1),'Tvwab':function(_0x452776,_0x1a948d){return _0x452776<_0x1a948d;},'UjZfV':'div','WnwoU':_0x48263f(0xa5),'wOEgz':_0x48263f(0xcb),'ctwql':function(_0x2f6ccb){return _0x2f6ccb();},'VYytP':function(_0x33e7ec){return _0x33e7ec();}},_0x174d55=document[_0x48263f(0xb5)](_0x32bb6c['WrPaM']);_0x174d55['innerHTML']='';for(let _0xe6b26a=0x0;_0x32bb6c[_0x48263f(0x98)](_0xe6b26a,boardSize);_0xe6b26a++){board[_0xe6b26a]=[];for(let _0x1b526a=0x0;_0x1b526a<boardSize;_0x1b526a++){board[_0xe6b26a][_0x1b526a]=0x0;const _0x12c074=document[_0x48263f(0xcd)](_0x32bb6c['UjZfV']);_0x12c074[_0x48263f(0xd1)][_0x48263f(0xbc)](_0x32bb6c[_0x48263f(0xc9)]),_0x12c074['dataset'][_0x48263f(0x96)]=_0xe6b26a,_0x12c074[_0x48263f(0x9c)]['col']=_0x1b526a,_0x12c074[_0x48263f(0xb8)](_0x32bb6c[_0x48263f(0xb2)],()=>selectTile(_0xe6b26a,_0x1b526a)),_0x174d55['appendChild'](_0x12c074);}}spawnTile(),_0x32bb6c['ctwql'](spawnTile),renderBoard(),_0x32bb6c[_0x48263f(0xbe)](updateMaxTile);}function _0x415b(){const _0x2ed521=['selected','2048Scores/','.tile[data-row=\x22','4843170LbjiMy','forEach','keydown','4MEfopb','flat','czzoH','WnwoU','UYyrJ','click','ArrowDown','createElement','ayfwt','innerHTML','RAfJD','classList','avatarBase64','dVPKp','push','OFZms','VtmsC','FfoLU','random','16116328tDNOim','ELhmf','oKcPc','ZhIZz','gSUEC','MfNCo','VBINc','</b>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','.game-board','671042pckLnr','2640456zgnjrr','vznTv','reverse','username','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22leaderboard-entry\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22data:image/png;base64,','getElementById','remove','row','textContent','Tvwab','NmqLw','rJmyi','kJket','dataset','YfKta','ArrowRight','col','ArrowUp','val','2762022BBmVLn','now','mqOef','tile','floor','replace','</span>\x20-\x20<b>','SNHEe','key','.restart-btn','ref','KBLyl','wmbZh','\x22][data-col=\x22','value','maxTile','wOEgz','ppIvY','orderByChild','querySelector','1114761nulCjS','liIDQ','addEventListener','length','4776023rxKxOA','MXNHa','add','max','VYytP','join'];_0x415b=function(){return _0x2ed521;};return _0x415b();}function renderBoard(){const _0x13f0fc=_0x5d97,_0x320630={'MXNHa':function(_0x49e254,_0x537892){return _0x49e254<_0x537892;},'ppIvY':function(_0x4ea96f,_0x5b3bac){return _0x4ea96f===_0x5b3bac;},'RAfJD':_0x13f0fc(0xc0)};for(let _0x5a0b86=0x0;_0x5a0b86<boardSize;_0x5a0b86++){for(let _0x22b2a9=0x0;_0x320630[_0x13f0fc(0xbb)](_0x22b2a9,boardSize);_0x22b2a9++){const _0x5ef932=document[_0x13f0fc(0xb5)](_0x13f0fc(0xc2)+_0x5a0b86+_0x13f0fc(0xaf)+_0x22b2a9+'\x22]'),_0x43aec2=board[_0x5a0b86][_0x22b2a9];_0x5ef932[_0x13f0fc(0x97)]=_0x320630[_0x13f0fc(0xb3)](_0x43aec2,0x0)?'':_0x43aec2,_0x5ef932[_0x13f0fc(0x9c)][_0x13f0fc(0xb0)]=_0x43aec2,_0x320630[_0x13f0fc(0xb3)](selectedTile[_0x13f0fc(0x96)],_0x5a0b86)&&_0x320630[_0x13f0fc(0xb3)](selectedTile[_0x13f0fc(0x9f)],_0x22b2a9)?_0x5ef932[_0x13f0fc(0xd1)][_0x13f0fc(0xbc)](_0x320630[_0x13f0fc(0xd0)]):_0x5ef932[_0x13f0fc(0xd1)][_0x13f0fc(0xe9)](_0x13f0fc(0xc0));}}}function spawnTile(){const _0x5aef25=_0x5d97,_0x4dd874={'rJmyi':function(_0x17df47,_0x2aa52c){return _0x17df47<_0x2aa52c;},'oKcPc':function(_0x408e17,_0xfdba7d){return _0x408e17===_0xfdba7d;},'VBINc':function(_0x50db8e,_0x49b949){return _0x50db8e>_0x49b949;},'dVPKp':function(_0x512193,_0x2cc2f1){return _0x512193*_0x2cc2f1;}},_0x5c49de=[];for(let _0x13d4f7=0x0;_0x4dd874[_0x5aef25(0x9a)](_0x13d4f7,boardSize);_0x13d4f7++){for(let _0x47f3d9=0x0;_0x4dd874[_0x5aef25(0x9a)](_0x47f3d9,boardSize);_0x47f3d9++){_0x4dd874[_0x5aef25(0xdb)](board[_0x13d4f7][_0x47f3d9],0x0)&&_0x5c49de[_0x5aef25(0xd4)]({'row':_0x13d4f7,'col':_0x47f3d9});}}if(_0x4dd874[_0x5aef25(0xdf)](_0x5c49de[_0x5aef25(0xb9)],0x0)){const _0x1ca020=_0x5c49de[Math[_0x5aef25(0xa6)](_0x4dd874[_0x5aef25(0xd3)](Math[_0x5aef25(0xd8)](),_0x5c49de[_0x5aef25(0xb9)]))];board[_0x1ca020[_0x5aef25(0x96)]][_0x1ca020['col']]=_0x4dd874[_0x5aef25(0x9a)](Math['random'](),0.9)?0x2:0x4;}}function selectTile(_0x5b9d85,_0x2914e6){const _0x171ccd=_0x5d97,_0x1c5335={'UYyrJ':function(_0x38a992){return _0x38a992();},'gSUEC':function(_0x4dcc4d){return _0x4dcc4d();}};selectedTile={'row':_0x5b9d85,'col':_0x2914e6},_0x1c5335[_0x171ccd(0xca)](renderBoard),_0x1c5335[_0x171ccd(0xdd)](updateMaxTile);}function handleKeyPress(_0x283813){const _0x1622f8=_0x5d97,_0x5c7f7a={'jsGkz':_0x1622f8(0xa0),'ELhmf':function(_0x4a054f,_0x8da736){return _0x4a054f>_0x8da736;},'SNHEe':_0x1622f8(0xcc),'NgDYY':function(_0x42f8f1,_0x3b8551){return _0x42f8f1<_0x3b8551;},'FfoLU':function(_0x5ce206,_0x4511a6){return _0x5ce206-_0x4511a6;},'ZPPeR':function(_0x3f5e2c,_0x522e70){return _0x3f5e2c>_0x522e70;},'wmbZh':_0x1622f8(0x9e),'vznTv':function(_0x498442,_0x1714e1){return _0x498442-_0x1714e1;},'liIDQ':function(_0x51209f,_0x52b61d){return _0x51209f!==_0x52b61d;},'ZhIZz':function(_0x5d601a,_0x2b07df,_0x2b3f20,_0x3761d9,_0xc390e9){return _0x5d601a(_0x2b07df,_0x2b3f20,_0x3761d9,_0xc390e9);},'KBLyl':function(_0x51be99){return _0x51be99();},'VtmsC':function(_0x293241){return _0x293241();}};if(selectedTile['row']===null||selectedTile[_0x1622f8(0x9f)]===null)return;const {row:_0x4a792e,col:_0x53da72}=selectedTile;let _0x38d936=_0x4a792e,_0x168870=_0x53da72;switch(_0x283813[_0x1622f8(0xaa)]){case _0x5c7f7a['jsGkz']:if(_0x5c7f7a[_0x1622f8(0xda)](_0x4a792e,0x0))_0x38d936--;break;case _0x5c7f7a[_0x1622f8(0xa9)]:if(_0x5c7f7a['NgDYY'](_0x4a792e,_0x5c7f7a[_0x1622f8(0xd7)](boardSize,0x1)))_0x38d936++;break;case'ArrowLeft':if(_0x5c7f7a['ZPPeR'](_0x53da72,0x0))_0x168870--;break;case _0x5c7f7a[_0x1622f8(0xae)]:if(_0x53da72<_0x5c7f7a[_0x1622f8(0xe4)](boardSize,0x1))_0x168870++;break;default:return;}(_0x5c7f7a[_0x1622f8(0xb7)](_0x38d936,_0x4a792e)||_0x5c7f7a[_0x1622f8(0xb7)](_0x168870,_0x53da72))&&(_0x5c7f7a[_0x1622f8(0xdc)](moveTile,_0x4a792e,_0x53da72,_0x38d936,_0x168870),selectedTile={'row':_0x38d936,'col':_0x168870},spawnTile(),_0x5c7f7a[_0x1622f8(0xad)](renderBoard),_0x5c7f7a[_0x1622f8(0xd6)](updateMaxTile));}function moveTile(_0x2a724a,_0x6fee24,_0xeb783f,_0x24b746){const _0x3969c0=_0x5d97,_0x48dc6c={'NmqLw':function(_0x34ce36,_0x295f75){return _0x34ce36===_0x295f75;}};if(_0x48dc6c[_0x3969c0(0x99)](board[_0xeb783f][_0x24b746],0x0))board[_0xeb783f][_0x24b746]=board[_0x2a724a][_0x6fee24],board[_0x2a724a][_0x6fee24]=0x0;else _0x48dc6c[_0x3969c0(0x99)](board[_0xeb783f][_0x24b746],board[_0x2a724a][_0x6fee24])&&(board[_0xeb783f][_0x24b746]*=0x2,board[_0x2a724a][_0x6fee24]=0x0);}document[_0x525f63(0xb5)](_0x525f63(0xab))[_0x525f63(0xb8)]('click',()=>{const _0x4c7581=_0x525f63,_0xef7427={'czzoH':function(_0x5a3a26){return _0x5a3a26();}};selectedTile={'row':null,'col':null},_0xef7427[_0x4c7581(0xc8)](createBoard);}),document[_0x525f63(0xb8)](_0x525f63(0xc5),handleKeyPress);let currentUser=null,maxTileValue=0x0;((async()=>{const _0x3fa199=_0x525f63,_0x306d5b={'YfKta':function(_0x16a7f5){return _0x16a7f5();}};currentUser=await _0x306d5b[_0x3fa199(0x9d)](authenticateFromURL);if(!currentUser)return;listenToLeaderboard(),createBoard();})());function getMaxTile(_0x79a5fa){const _0x4d77ce=_0x525f63;return Math[_0x4d77ce(0xbd)](..._0x79a5fa[_0x4d77ce(0xc7)]());}function updateMaxTile(){const _0xdb61fc=_0x525f63,_0x5db6ba={'mqOef':function(_0x27b1dd,_0x388400){return _0x27b1dd(_0x388400);},'MfNCo':function(_0x510b76,_0xd0367b){return _0x510b76>_0xd0367b;}},_0x4f0de5=_0x5db6ba[_0xdb61fc(0xa4)](getMaxTile,board);_0x5db6ba[_0xdb61fc(0xde)](_0x4f0de5,maxTileValue)&&(maxTileValue=_0x4f0de5,saveTileToFirebase(_0x4f0de5));}function saveTileToFirebase(_0x4ee587){const _0xe13ec5=_0x525f63,_0xcae4f1={'ayfwt':function(_0x29f6c1,_0x5f58b3){return _0x29f6c1(_0x5f58b3);}},_0xc3769a=_0xcae4f1[_0xe13ec5(0xce)](sanitizeUsername,currentUser[_0xe13ec5(0xe6)]);db['ref'](_0xe13ec5(0xc1)+_0xc3769a)['set']({'username':currentUser[_0xe13ec5(0xe6)],'avatarBase64':currentUser['avatarBase64']||'','maxTile':_0x4ee587,'timestamp':Date[_0xe13ec5(0xa3)]()});}function sanitizeUsername(_0xa4a022){const _0x38c6a0=_0x525f63;return _0xa4a022[_0x38c6a0(0xa7)](/[.#$\[\]]/g,'_');}function listenToLeaderboard(){const _0x5565c8=_0x525f63,_0x29fca3={'KwiNx':'leaderboardEntries','kJket':'2048Scores','OFZms':'maxTile','AIXpW':'value'},_0x25e450=document[_0x5565c8(0xe8)](_0x29fca3['KwiNx']);db[_0x5565c8(0xac)](_0x29fca3[_0x5565c8(0x9b)])[_0x5565c8(0xb4)](_0x29fca3[_0x5565c8(0xd5)])['limitToLast'](0x14)['on'](_0x29fca3['AIXpW'],_0x2a6efd=>{const _0x23effc=_0x5565c8,_0x4017ca=[];_0x2a6efd[_0x23effc(0xc4)](_0x1a9c60=>_0x4017ca[_0x23effc(0xd4)](_0x1a9c60[_0x23effc(0xa1)]())),_0x4017ca[_0x23effc(0xe5)](),_0x25e450[_0x23effc(0xcf)]=_0x4017ca['map'](_0x48fbd5=>_0x23effc(0xe7)+_0x48fbd5[_0x23effc(0xd2)]+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x48fbd5[_0x23effc(0xe6)]+_0x23effc(0xa8)+_0x48fbd5[_0x23effc(0xb1)]+_0x23effc(0xe0))[_0x23effc(0xbf)]('');});}