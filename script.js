const _0x123dc0=_0x52bd;(function(_0x508a53,_0x22b976){const _0x1ebf5a=_0x52bd,_0x1b9c41=_0x508a53();while(!![]){try{const _0x254159=parseInt(_0x1ebf5a(0x1bd))/0x1*(-parseInt(_0x1ebf5a(0x18e))/0x2)+-parseInt(_0x1ebf5a(0x19c))/0x3*(parseInt(_0x1ebf5a(0x1c4))/0x4)+parseInt(_0x1ebf5a(0x1ae))/0x5*(parseInt(_0x1ebf5a(0x1c8))/0x6)+parseInt(_0x1ebf5a(0x189))/0x7+-parseInt(_0x1ebf5a(0x1a4))/0x8*(parseInt(_0x1ebf5a(0x1ab))/0x9)+parseInt(_0x1ebf5a(0x1a2))/0xa+parseInt(_0x1ebf5a(0x194))/0xb;if(_0x254159===_0x22b976)break;else _0x1b9c41['push'](_0x1b9c41['shift']());}catch(_0x3e520a){_0x1b9c41['push'](_0x1b9c41['shift']());}}}(_0x599c,0x98a42));const boardSize=0x4;let board=[],selectedTile={'row':null,'col':null};function createBoard(){const _0x4d5398=_0x52bd,_0x2f48e4={'qdXvO':'.game-board','YVAdJ':function(_0xe4b22,_0x19869a){return _0xe4b22<_0x19869a;},'FLsRY':'tile','bBLUF':'click','wmgYR':function(_0x4cf5e2){return _0x4cf5e2();},'AWpXu':function(_0x15db37){return _0x15db37();},'gvxJp':function(_0x4d52be){return _0x4d52be();}},_0x4703c7=document[_0x4d5398(0x1ca)](_0x2f48e4[_0x4d5398(0x193)]);_0x4703c7[_0x4d5398(0x17f)]='';for(let _0xbc2ebe=0x0;_0x2f48e4[_0x4d5398(0x19a)](_0xbc2ebe,boardSize);_0xbc2ebe++){board[_0xbc2ebe]=[];for(let _0x29434b=0x0;_0x29434b<boardSize;_0x29434b++){board[_0xbc2ebe][_0x29434b]=0x0;const _0x1efb58=document[_0x4d5398(0x1b6)](_0x4d5398(0x17c));_0x1efb58[_0x4d5398(0x184)]['add'](_0x2f48e4[_0x4d5398(0x181)]),_0x1efb58[_0x4d5398(0x187)]['row']=_0xbc2ebe,_0x1efb58[_0x4d5398(0x187)][_0x4d5398(0x17d)]=_0x29434b,_0x1efb58['addEventListener'](_0x2f48e4[_0x4d5398(0x1be)],()=>selectTile(_0xbc2ebe,_0x29434b)),_0x4703c7['appendChild'](_0x1efb58);}}_0x2f48e4[_0x4d5398(0x17a)](spawnTile),_0x2f48e4[_0x4d5398(0x1b1)](spawnTile),_0x2f48e4[_0x4d5398(0x17a)](renderBoard),_0x2f48e4[_0x4d5398(0x1ba)](updateMaxTile);}function renderBoard(){const _0x5d83d9=_0x52bd,_0x3930a1={'UxeZv':function(_0x355078,_0x31b4f8){return _0x355078<_0x31b4f8;},'CUXCH':function(_0x5eeadd,_0x2a1f55){return _0x5eeadd===_0x2a1f55;},'fMZCD':function(_0x212754,_0x5d5609){return _0x212754===_0x5d5609;},'xlbZY':function(_0x336f28,_0x421830){return _0x336f28===_0x421830;},'hgBXT':_0x5d83d9(0x186)};for(let _0x557311=0x0;_0x3930a1[_0x5d83d9(0x1b7)](_0x557311,boardSize);_0x557311++){for(let _0x43adb6=0x0;_0x3930a1[_0x5d83d9(0x1b7)](_0x43adb6,boardSize);_0x43adb6++){const _0x56bb4d=document[_0x5d83d9(0x1ca)]('.tile[data-row=\x22'+_0x557311+_0x5d83d9(0x19b)+_0x43adb6+'\x22]'),_0x32fa2a=board[_0x557311][_0x43adb6];_0x56bb4d[_0x5d83d9(0x1aa)]=_0x3930a1[_0x5d83d9(0x174)](_0x32fa2a,0x0)?'':_0x32fa2a,_0x56bb4d['dataset']['value']=_0x32fa2a,_0x3930a1['fMZCD'](selectedTile[_0x5d83d9(0x18d)],_0x557311)&&_0x3930a1[_0x5d83d9(0x1c2)](selectedTile[_0x5d83d9(0x17d)],_0x43adb6)?_0x56bb4d[_0x5d83d9(0x184)][_0x5d83d9(0x1bb)](_0x3930a1[_0x5d83d9(0x197)]):_0x56bb4d['classList'][_0x5d83d9(0x17b)](_0x3930a1[_0x5d83d9(0x197)]);}}}function spawnTile(){const _0x38c917=_0x52bd,_0x4c0e6a={'bhRSd':function(_0x2e620c,_0x578d4d){return _0x2e620c===_0x578d4d;},'JqXWZ':function(_0x26fcba,_0x2c5a0e){return _0x26fcba>_0x2c5a0e;},'XFtco':function(_0x3f7a2d,_0x3645f3){return _0x3f7a2d<_0x3645f3;}},_0x38db16=[];for(let _0x44e40d=0x0;_0x44e40d<boardSize;_0x44e40d++){for(let _0x44cc0e=0x0;_0x44cc0e<boardSize;_0x44cc0e++){_0x4c0e6a['bhRSd'](board[_0x44e40d][_0x44cc0e],0x0)&&_0x38db16['push']({'row':_0x44e40d,'col':_0x44cc0e});}}if(_0x4c0e6a['JqXWZ'](_0x38db16[_0x38c917(0x1a5)],0x0)){const _0x36444a=_0x38db16[Math['floor'](Math[_0x38c917(0x1b3)]()*_0x38db16[_0x38c917(0x1a5)])];board[_0x36444a[_0x38c917(0x18d)]][_0x36444a[_0x38c917(0x17d)]]=_0x4c0e6a['XFtco'](Math[_0x38c917(0x1b3)](),0.9)?0x2:0x4;}}function selectTile(_0x286951,_0x1a429b){const _0x243d3f=_0x52bd,_0x4dd93d={'BLFja':function(_0x29489e){return _0x29489e();}};selectedTile={'row':_0x286951,'col':_0x1a429b},_0x4dd93d[_0x243d3f(0x1b0)](renderBoard),updateMaxTile();}function handleKeyPress(_0x355f98){const _0x28c5bb=_0x52bd,_0x12d1fd={'ecNcJ':function(_0x51be53,_0x3f9964){return _0x51be53===_0x3f9964;},'iQGcm':_0x28c5bb(0x1b9),'mvgtH':function(_0x281684,_0x158d39){return _0x281684>_0x158d39;},'qextL':function(_0x502d27,_0x5a3dbd){return _0x502d27<_0x5a3dbd;},'hYijl':_0x28c5bb(0x1a6),'ZLGIe':function(_0x46afc6,_0xfe1a28){return _0x46afc6>_0xfe1a28;},'gWvAf':'ArrowRight','bhFNE':function(_0xb1828f,_0xf6b275){return _0xb1828f!==_0xf6b275;},'WVyew':'2|4|1|3|0','wykMM':function(_0x41328c){return _0x41328c();},'AJXdp':function(_0x482232,_0x3f4838,_0x26c096,_0x67a482,_0x3de455){return _0x482232(_0x3f4838,_0x26c096,_0x67a482,_0x3de455);}};if(_0x12d1fd[_0x28c5bb(0x17e)](selectedTile[_0x28c5bb(0x18d)],null)||_0x12d1fd[_0x28c5bb(0x17e)](selectedTile[_0x28c5bb(0x17d)],null))return;const {row:_0x4b8cbf,col:_0x4bb93b}=selectedTile;let _0x367038=_0x4b8cbf,_0x28f192=_0x4bb93b;switch(_0x355f98['key']){case _0x12d1fd[_0x28c5bb(0x1b2)]:if(_0x12d1fd[_0x28c5bb(0x182)](_0x4b8cbf,0x0))_0x367038--;break;case _0x28c5bb(0x1c0):if(_0x12d1fd[_0x28c5bb(0x1af)](_0x4b8cbf,boardSize-0x1))_0x367038++;break;case _0x12d1fd[_0x28c5bb(0x188)]:if(_0x12d1fd['ZLGIe'](_0x4bb93b,0x0))_0x28f192--;break;case _0x12d1fd[_0x28c5bb(0x1bc)]:if(_0x12d1fd[_0x28c5bb(0x1af)](_0x4bb93b,boardSize-0x1))_0x28f192++;break;default:return;}if(_0x12d1fd['bhFNE'](_0x367038,_0x4b8cbf)||_0x12d1fd[_0x28c5bb(0x1bf)](_0x28f192,_0x4bb93b)){const _0x23f505=_0x12d1fd[_0x28c5bb(0x1c6)][_0x28c5bb(0x183)]('|');let _0x519fc6=0x0;while(!![]){switch(_0x23f505[_0x519fc6++]){case'0':_0x12d1fd[_0x28c5bb(0x19f)](updateMaxTile);continue;case'1':_0x12d1fd[_0x28c5bb(0x19f)](spawnTile);continue;case'2':_0x12d1fd[_0x28c5bb(0x192)](moveTile,_0x4b8cbf,_0x4bb93b,_0x367038,_0x28f192);continue;case'3':_0x12d1fd[_0x28c5bb(0x19f)](renderBoard);continue;case'4':selectedTile={'row':_0x367038,'col':_0x28f192};continue;}break;}}}function moveTile(_0x503c42,_0x956e7e,_0x227435,_0x588c41){const _0xb90614=_0x52bd,_0x45c085={'qGilA':function(_0x3c4362,_0x2d8bf5){return _0x3c4362===_0x2d8bf5;},'WQjEd':function(_0x3bcd84,_0x3f027e){return _0x3bcd84===_0x3f027e;}};if(_0x45c085[_0xb90614(0x1c7)](board[_0x227435][_0x588c41],0x0))board[_0x227435][_0x588c41]=board[_0x503c42][_0x956e7e],board[_0x503c42][_0x956e7e]=0x0;else _0x45c085['WQjEd'](board[_0x227435][_0x588c41],board[_0x503c42][_0x956e7e])&&(board[_0x227435][_0x588c41]*=0x2,board[_0x503c42][_0x956e7e]=0x0);}document[_0x123dc0(0x1ca)]('.restart-btn')['addEventListener'](_0x123dc0(0x1b4),()=>{const _0x3674c2={'BTcuR':function(_0x5a4240){return _0x5a4240();}};selectedTile={'row':null,'col':null},_0x3674c2['BTcuR'](createBoard);}),document[_0x123dc0(0x1a3)](_0x123dc0(0x18b),handleKeyPress);let currentUser=null,maxTileValue=0x0;function _0x52bd(_0x32a6c4,_0x21c00e){const _0x599ce1=_0x599c();return _0x52bd=function(_0x52bd93,_0x36f8b3){_0x52bd93=_0x52bd93-0x174;let _0x2388f9=_0x599ce1[_0x52bd93];return _0x2388f9;},_0x52bd(_0x32a6c4,_0x21c00e);}((async()=>{const _0xf49528=_0x123dc0,_0x4fde88={'bnTHf':_0xf49528(0x195),'nFtis':function(_0x32ab9e){return _0x32ab9e();}};currentUser=await authenticateFromURL();if(!currentUser)return;_0x4fde88[_0xf49528(0x198)](listenToLeaderboard),_0x4fde88[_0xf49528(0x198)](createBoard),window[_0xf49528(0x1a3)](_0xf49528(0x191),()=>{const _0x216760=_0xf49528;sessionStorage[_0x216760(0x185)]('2048_user'),sessionStorage[_0x216760(0x185)](_0x4fde88['bnTHf']);});})());function getMaxTile(_0x4e1f90){const _0x123166=_0x123dc0;return Math[_0x123166(0x1ad)](..._0x4e1f90['flat']());}function _0x599c(){const _0xbd373e=['set','xlbZY','limitToLast','776ljrwVh','forEach','WVyew','qGilA','6tOhXwc','leaderboardEntries','querySelector','CUXCH','sort','2048Scores','maxTile','wuatS','TbRUm','wmgYR','remove','div','col','ecNcJ','innerHTML','getElementById','FLsRY','mvgtH','split','classList','removeItem','selected','dataset','hYijl','5656511XrRqaK','avatarBase64','keydown','username','row','2eAeVrH','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22leaderboard-entry\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','beforeunload','AJXdp','qdXvO','3796606SvDqKa','2048_avatar','</span>\x20\x20-\x20\x20<b>','hgBXT','nFtis','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22data:image/png;base64,','YVAdJ','\x22][data-col=\x22','2958rlRHiV','ynarQ','VEbgQ','wykMM','val','orderByChild','5568950fxToBK','addEventListener','1616rPCVcd','length','ArrowLeft','ref','then','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','textContent','49689bXLKjY','</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','max','3050785cZCIkM','qextL','BLFja','AWpXu','iQGcm','random','click','get','createElement','UxeZv','join','ArrowUp','gvxJp','add','gWvAf','388527fLFiHU','bBLUF','bhFNE','ArrowDown'];_0x599c=function(){return _0xbd373e;};return _0x599c();}function updateMaxTile(){const _0x52e08a=_0x123dc0,_0x31b420={'VEbgQ':function(_0xf5bb9b,_0x358cc2){return _0xf5bb9b(_0x358cc2);},'EmqDJ':function(_0x32a4cc,_0x35223e){return _0x32a4cc>_0x35223e;}},_0x26d29c=_0x31b420[_0x52e08a(0x19e)](getMaxTile,board);_0x31b420['EmqDJ'](_0x26d29c,maxTileValue)&&(maxTileValue=_0x26d29c,_0x31b420[_0x52e08a(0x19e)](saveTileToFirebase,_0x26d29c));}function saveTileToFirebase(_0x4e3ccf){const _0x4bda37=_0x123dc0,_0x26ffe2={'TbRUm':function(_0x2a2bee,_0x3efb70){return _0x2a2bee>_0x3efb70;}},_0x5344b0=sanitizeUsername(currentUser['username']),_0x464f8a=db[_0x4bda37(0x1a7)]('2048Scores/'+_0x5344b0);_0x464f8a[_0x4bda37(0x1b5)]()[_0x4bda37(0x1a8)](_0x2fe8d4=>{const _0x44d29d=_0x4bda37,_0x2efa19=_0x2fe8d4[_0x44d29d(0x1a0)]();(!_0x2efa19||_0x26ffe2[_0x44d29d(0x179)](_0x4e3ccf,_0x2efa19['maxTile']||0x0))&&_0x464f8a[_0x44d29d(0x1c1)]({'username':currentUser[_0x44d29d(0x18c)],'avatarBase64':currentUser[_0x44d29d(0x18a)]||'','maxTile':_0x4e3ccf,'timestamp':Date['now']()});});}function sanitizeUsername(_0x358101){return _0x358101['replace'](/[.#$\[\]]/g,'_');}function listenToLeaderboard(){const _0x5d84a2=_0x123dc0,_0x1217e2={'PkEuR':function(_0x324471,_0x114d61){return _0x324471===_0x114d61;},'wuatS':function(_0x22fbfd,_0xeb17c1){return _0x22fbfd===_0xeb17c1;},'ZSUvP':function(_0x2698bc,_0x1e841b){return _0x2698bc+_0x1e841b;},'ynarQ':_0x5d84a2(0x1c9),'BRcWH':'value'},_0x23a2ca=document[_0x5d84a2(0x180)](_0x1217e2[_0x5d84a2(0x19d)]);db['ref'](_0x5d84a2(0x176))[_0x5d84a2(0x1a1)]('maxTile')[_0x5d84a2(0x1c3)](0x14)['on'](_0x1217e2['BRcWH'],_0x14599f=>{const _0x2ae052=_0x5d84a2,_0x4772dc=[];_0x14599f[_0x2ae052(0x1c5)](_0x4b1114=>_0x4772dc[_0x2ae052(0x18f)](_0x4b1114[_0x2ae052(0x1a0)]())),_0x4772dc[_0x2ae052(0x175)]((_0x29c6ed,_0x4c4ea8)=>_0x4c4ea8[_0x2ae052(0x177)]-_0x29c6ed[_0x2ae052(0x177)]),_0x23a2ca[_0x2ae052(0x17f)]=_0x4772dc['map']((_0x55518e,_0x45ca1c)=>{const _0xcb3841=_0x2ae052;let _0x118ea0='';if(_0x1217e2['PkEuR'](_0x45ca1c,0x0))_0x118ea0='🥇';else{if(_0x1217e2[_0xcb3841(0x178)](_0x45ca1c,0x1))_0x118ea0='🥈';else{if(_0x45ca1c===0x2)_0x118ea0='🥉';}}const _0x1d522b='<span\x20style=\x22margin-right:8px;\x22>'+_0x1217e2['ZSUvP'](_0x45ca1c,0x1)+'\x20'+_0x118ea0+'</span>';return _0xcb3841(0x190)+_0x1d522b+_0xcb3841(0x199)+_0x55518e[_0xcb3841(0x18a)]+_0xcb3841(0x1a9)+_0x55518e[_0xcb3841(0x18c)]+_0xcb3841(0x196)+_0x55518e[_0xcb3841(0x177)]+_0xcb3841(0x1ac);})[_0x2ae052(0x1b8)]('');});}